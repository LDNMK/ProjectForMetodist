<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ФАІТ</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/showStudentCard.css">
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" />
    <link rel="icon" type="image/png" href="logo1.png">

</head>
<body>
<nav class="sidebar">
    <div class="text"> <img src="logo1.png" width="36px"> КНУБА</div>
    <ul>
        <li>
            <a href="index.html">Головна</a>
        </li>
        <li>
            <a href="#" class="card-btn">Картка студента
                <span class="fas fa-caret-down first"></span>
            </a>
            <ul class="card-show">
                <li>
                    <a href="showStudentCard.html">Відобразити</a>
                </li>
                <li>
                    <a href="addStudentCart.html">Додати</a>
                </li>
            </ul>
        </li>
        <li>
            <a href="#" class="plan-btn">Навчальний план
                <span class="fas fa-caret-down second"></span>
            </a>
            <ul class="plan-show">
                <li>
                    <a href="curriculum.html">Відобразити</a>
                </li>
                <li>
                    <a href="addCurriculum.html">Додати</a>
                </li>
            </ul>
        </li>
        <li>
            <a href="transferStudent.html">Перевести</a>
        </li>
        <li>
            <a href="progress.html">Успішність</a>
        </li>
        <li>
            <a href="createReport.html">Створити звіт</a>
        </li>
        <li>
            <a href="createStudentGroup.html">Створити групу(и)</a>
        </li>
    </ul>
</nav>
<div class="content">
    <h1>Факультет автоматизацїї та інформаційних технологій</h1>
    <section id="section1">
        <br>

        Спеціальність: 
        <select>
            <option>
                Оберіть спеціальність
            </option>
        </select>
        Спеціалізація: 
        <select>
            <option>
                Оберіть спеціалізацію
            </option>
        </select>
        Рік: <select>
            <option>
                Оберіть рік
            </option>
        </select></br>

        Курс: <select>
            <option>
                Оберіть курс
            </option>
        </select>
        Група: <select id="group">
            <option>
                Оберіть група
            </option>
        </select>

        Студент: <select id="student">
            <option>
                Оберіть студента
            </option>
        </select></br>

        <button id="show"> Показати </button>
    </section>

    <h2>Навчальна картка студента</h2>
    <section id="section2">

        Прізвище: <input id="surname" type="text" width="80px"> <button id="change"> Змінити
        </button></br>
        Ім'я: <input id="name" type="text"> </br>
        По-батькові: <input id="birthday" id="middle_name" type="text" > </br>
        Середній бал: <input id="gpa" type="text"> <button> Розрахувати </button> </br>
        Дата народження: <input id="birthday" type="date" > </br>
        Місце народження: <input id="birthplace" type="text" > </br>
        Громадянство <input id="citizenship" type="text" ></br>
        Сімейний стан:
        <select id="marital_status">
            <option> Обрати статус </option>
        </select></br>
        Місце проживання/місце реєстрації: <input id="place_of_residence" type="text" > </br>
        Наявність пільг при вступі:
        <select id="privilege">
            <option> Оберіть пільги </option>
        </select></br>
        Зарахований(а) наказом від: <input id="date_reckoned" type="date"  width="80px">
        №<input id="number_reckoned" type="text" placeholder="1868"></br>
        Трудова книжка: <input id="employment_history_number" type="text" >
        <input id="employment_history_when issued" type="date" >
        <input id="employment_history_
        by_whom_issued" type="text" placeholder=></br>
        Реєстраційний номер облікової картки
        платника податків
        або серія та номер паспорту:<input type="text" ></br>
        Статус студента: 
        <select id="student_status">
            <option>Оберіть статус</option>
        </select></br>

        Переведення з курсу на курс,
        перерва в академ. навчанні: </br>
        <table border="1px" width="50%">
            <tr>
                <td>Курс</td>
                <td>Номер наказу</td>
                <td>Дата наказу</td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </table></br>
        Статус студента: 
        <select>
            <option>
                Оберіть статус студента
            </option>
        </select>

        <button id="save"> Зберегти </button>
    </section>
</div>

<script>
    $('.card-btn').click(function () {
        $('nav ul .card-show').toggleClass("show");
        $('nav ul .first').toggleClass("rotate");
    });
    $('.plan-btn').click(function () {
        $('nav ul .plan-show').toggleClass("show1");
        $('nav ul .second').toggleClass("rotate");
    });

    document.getElementById('show').onclick = function (e) {
        e.preventDefault();
        let data = {
            StudentId: document.getElementById('student').value,
        }
        fetch('api/StudentCard/SaveStudentCardInfo', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data),
        })
    };

    document.getElementById('group').onclick = function (e) {
        e.preventDefault();
        var selected = this.selectedIndex;
        fetch('api/StudentCard/GetGroups', {
            method: 'GET'
        })
            .then((resp) => resp.json())
            .then(function (data) {
                let groups = data;

                var select = document.getElementById('group');
                removeOptions(select);
                select.value = this.innerHTML;
                this.innerHTML = '';
                for (var i in groups) {
                    var option = document.createElement("option");

                    option.text = groups[i];

                    select.appendChild(option);
                }
            }).then(function () {
                document.getElementById("group").selectedIndex = selected;
            })
    };

    function removeOptions(selectElement) {
        var i, L = selectElement.options.length - 1;
        for (i = L; i > 0; i--) {
            selectElement.remove(i);
        }
    }

    document.getElementById('student').onclick = function (e) {
        e.preventDefault();
        var groupName = document.getElementById('group').value;
        fetch('api/StudentCard/GetListOfStudents/' + groupName, {
            method: 'GET'
        })
    };
</script>

</body>

</html>