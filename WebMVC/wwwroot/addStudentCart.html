<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ФАІТ</title>
    <link rel="stylesheet" href="css/addCard.css">
    <link rel="stylesheet" href="css/style.css">

    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" />
    <link rel="icon" type="image/png" href="logo1.png">

</head>

<body>
    <div class="container">
        <div class="sidebar">
            <nav class="sidebar">
                <div class="text"> <img src="logo1.png" width="36px"> КНУБА</div>
                <ul>
                    <li>
                        <a href="index.html">Головна
                        </a>
                    </li>
                    <li>
                        <a class="card-btn">Картка студента
                            <span class="fas fa-caret-down first"></span>
                        </a>
                        <ul class="card-show">
                            <li>
                                <a href="showStudentCard.html">Відобразити</a>
                            </li>
                            <li>
                                <a href="addStudentCart.html">Додати</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="plan-btn">Навчальний план
                            <span class="fas fa-caret-down second"></span>
                        </a>
                        <ul class="plan-show">
                            <li>
                                <a href="curriculum.html">Відобразити</a>
                            </li>
                            <li>
                                <a href="addCurriculum.html">Додати</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="transferStudent.html">Перевести</a>
                    </li>
                    <li>
                        <a href="progress.html">Успішність</a>
                    </li>
                    <li>
                        <a href="createReport.html">Створити звіт</a>
                    </li>
                    <li>
                        <a href="createStudentGroup.html">Створити групу(и)</a>
                    </li>
                </ul>

            </nav>
        </div>

        <div class="content">
            <h1>Факультет автоматизацїї та інформаційних технологій</h1>
            <section id="section1">
                <br>

                Факультет: <select>
                    <option>
                        Оберіть Факультет
                    </option>
                    <option value="ФАІТ">
                        ФАІТ
                    </option>
                </select>
                Курс: <select id="course">
                    <option>
                        Оберіть курс
                    </option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                </select>
                Група: <select id="group">
                    <option>
                        Оберіть групу
                    </option>
                </select> </br>


                Рівень вищої освіти/освітньо-кваліфікаційний рівень:
                <select>
                    <option>
                        Оберіть рівень освіти
                    </option>
                    <option value="Бакалавр">
                        Бакалавр
                    </option>
                </select> </br>

                Спеціальність:
                <select>
                    <option>
                        Оберіть спеціальність
                    </option>
                </select>
                Спеціалізація:
                <select>
                    <option>
                        Оберіть спеціалізацію
                    </option>
                </select>
                <button> Показати </button>
            </section>

            <h2>Навчальна картка студента</h2>
            <section id="section2">
                Прізвище: <input id="surname" type="text" placeholder="Шевченко" width="80px"></br>
                Ім'я: <input id="name" type="text" placeholder="Андрій"> </br>
                По-батькові: <input id="middle_name" type="text" placeholder="Миколайович"> </br>
                Дата народження: <input id="birthday" type="date" placeholder=""> </br>
                Місце народження: <input id="birthplace" type="text" placeholder="Київ"> </br>
                Громадянство <input id="citizenship" type="text" placeholder="Українець"></br>
                Сімейний стан:
                <select id="marital_status">
                    <option value="1">
                        Обрати статус
                    </option>
                    <option value="2">
                        Одружений/Заміжня
                    </option>
                    <option value="3">
                        Не одружений/Не заміжня
                    </option>
                </select></br>
                Місце проживання/місце реєстрації: <input id="registration_place" type="text" placeholder="Київ"> </br>
                Наявність пільг при вступі:
                <select id="exemption">
                    <option> Оберіть пільги </option>
                </select></br>
                Зарахований(а) наказом від: <input id="date_reckoned" type="date" placeholder="31" width="80px">
                №<input id="number_reckoned" type="text" placeholder="1868"></br>
                1) За конкурсом:
                <select id="competition">
                    <option value="1">
                        Оберіть стаж
                    </option>
                    <option value="2">
                        Із стажем
                    </option>
                    <option value="3">
                        Без стажу
                    </option>
                </select></br>
                2) У порядку переведення з <input type="text" id="transfer_order"></br>
                3) За направленням <input type="text" id="by_direction"></br>
                4) За особливими умовами участі у конкурсі <input type="text"
                    id="special_conditions_of_competition"></br>
                5) Поза конкурсом <input type="text" id="out_of_competition"></br>
                6) На умовах повного відшкодування
                <select id="full_refund">
                    <option value="1">
                        Оберіть умову
                    </option>
                    <option value="2">
                        Державний кредит
                    </option>
                    <option value="3">
                        Фізична особа
                    </option>
                    <option value="4">
                        Юридична особа
                    </option>
                </select></br>

                Трудова книжка: <input id="employment_history_number" type="text" placeholder="Номер">
                <input id="employment_given_date" type="date" placeholder="Коли видана">
                <input id="employment_history_by_whom_issued" type="text" placeholder="Ким видана"></br>
                Реєстраційний номер облікової картки
                платника податків
                або серія та номер паспорту:<input id="registration_or_passport_number" type="text"
                    placeholder="Номер"></br>
                Статус студента:
                <select id="student_status">
                    <option value="1">
                        Оберіть статус
                    </option>
                    <option value="2">
                        Переведен з групой
                    </option>
                    <option value="3">
                        В академічній відпустці
                    </option>
                    <option value="4">
                        Не закрив сесію
                    </option>
                    <option value="5">
                        Виключен з навчання
                    </option>
                    <option value="6">
                        Закінчив степінь
                    </option>
                </select>
                <button id="btn"> Зберегти </button>
            </section>
        </div>
    </div>

    <script>
        $('.card-btn').click(function () {
            $('nav ul .card-show').toggleClass("show");
            $('nav ul .first').toggleClass("rotate");
        });
        $('.plan-btn').click(function () {
            $('nav ul .plan-show').toggleClass("show1");
            $('nav ul .second').toggleClass("rotate");
        });

        document.getElementById('btn').onclick = function (e) {
            e.preventDefault();
            let data = {
                Course: document.getElementById('course').value,
                Group: document.getElementById('group').value,
                Surname: document.getElementById('surname').value,
                Name: document.getElementById('name').value,
                Patronymic: document.getElementById('middle_name').value,
                Birthday: document.getElementById('birthday').value,
                BirthPlace: document.getElementById('birthplace').value,
                Immenseness: document.getElementById('citizenship').value,
                MaritalStatusId: document.getElementById('marital_status').value,
                Registration: document.getElementById('registration_place').value,
                Exemption: document.getElementById('exemption').value,
                OrderDate: document.getElementById('date_reckoned').value,
                ExpirienceCompetitionId: document.getElementById('competition').value,
                TransferFrom: document.getElementById('transfer_order').value,
                TransferDirection: document.getElementById('by_direction').value,
                CompetitionConditions: document.getElementById('special_conditions_of_competition').value,
                OutOfCompetitionInfo: document.getElementById('out_of_competition').value,
                AmmendsId: document.getElementById('full_refund').value,
                OrderNumber: document.getElementById('number_reckoned').value,
                EmploymentNumber: document.getElementById('employment_history_number').value,
                EmploymentGivenDate: document.getElementById('employment_given_date').value,
                EmploymentAuthority: document.getElementById('employment_history_by_whom_issued').value,
                RegistrOrPassportNumber: document.getElementById('registration_or_passport_number').value,
                StudStateId: document.getElementById('student_status').value
            }
            fetch('api/StudentCard/SaveStudentCardInfo', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data),
            })
        };

        document.getElementById('group').onclick = function (e) {
            e.preventDefault();
            var selected = this.selectedIndex;
            fetch('api/StudentCard/GetGroups', {
                method: 'GET'
            })
            .then((resp) => resp.json())
            .then(function (data) {
                let groups = data;

                var select = document.getElementById('group');
                removeOptions(select);
                select.value = this.innerHTML;
                this.innerHTML = '';
                for (var i in groups) {
                    var option = document.createElement("option");
                    option.setAttribute("value", i);

                    option.text = groups[i];

                    select.appendChild(option);
                }
            }).then(function () {
                document.getElementById("group").selectedIndex = selected;
            })
        };

        function removeOptions(selectElement) {
            var i, L = selectElement.options.length - 1;
            for (i = L; i > 0; i--) {
                selectElement.remove(i);
            }
        }

    </script>
</body>

</html>